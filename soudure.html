<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Soudure</title>

    <style>
      body {
        margin: 0;
        background: #000;
      }

      .section {
        position: relative;
        width: 100%;
        height: 100vh;
        overflow: hidden;
      }

      /* Photos par √©tape */
      img {
        position: absolute;
        width: 100%;
        top: 0;
        left: 0;
        user-select: none;
        opacity: 0;
        transition: opacity 0.5s ease; /* fondu */
      }

      img.active {
        opacity: 1; /* photo visible */
      }

      /* Zones cliquables */
      .click-zone {
        position: absolute;
        z-index: 20;
        cursor: pointer;
      }

      /* Progression et feedback */
      #progress {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        color: #00ffcc;
        font-family: Arial, sans-serif;
        font-size: 18px;
        background: rgba(0, 0, 0, 0.6);
        padding: 10px 20px;
        border-radius: 10px;
      }

      #feedback {
        position: fixed;
        bottom: 70px;
        left: 50%;
        transform: translateX(-50%);
        color: #ff4444;
        font-family: Arial, sans-serif;
        font-size: 16px;
        background: rgba(0, 0, 0, 0.7);
        padding: 8px 16px;
        border-radius: 8px;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .click-zone:hover {
        outline: 2px dashed #00ffcc;
        transition: all 0.2s ease;
      }
      .object-hover.glow {
        filter: drop-shadow(0 0 6px #00ff00) drop-shadow(0 0 12px #00ff00)
          drop-shadow(0 0 20px #00ff00);
      }
    </style>
  </head>

  <body>
    <div class="section">
      <!-- PHOTOS PAR √âTAPE -->
      <img id="photo1" src="img/soudure/1 (C).jpg" class="active" />
      <img id="photo1" src="img/soudure/01bis (C).jpg" />

      <img id="photo2" src="img/soudure/2 (C).jpg" />
      <img id="photo9" src="img/soudure/9 (C).jpg" />

      <img id="photo3" src="img/soudure/3 (C).jpg" />
      <img id="photo4" src="img/soudure/4 (C).jpg" />
      <img id="photo5" src="img/soudure/5 (C).jpg" />
      <img id="photo6" src="img/soudure/6 (C).jpg" />
      <img id="photo7" src="img/soudure/7 (C).jpg" />
      <img id="photo8" src="img/soudure/8 (C).jpg" />
      <img id="photo10" src="img/soudure/10 (C).jpg" />

      <!-- OBJETS -->
      <img
        id="etain"
        class="object-hover"
        src="img/soudure/EÃÅtain (C).png"
        alt=""
      />
      <div
        class="click-zone"
        data-target="etain"
        style="top: 80%; left: 65%; width: 90px; height: 160px"
      ></div>

      <img
        id="pince"
        class="object-hover"
        src="img/soudure/Pince (C).png"
        alt=""
      />
      <div
        class="click-zone"
        data-target="pince"
        style="top: 73%; left: 72%; width: 271px; height: 200px"
      ></div>

      <img
        id="gaine"
        class="object-hover"
        src="img/soudure/Gaine (C).png"
        alt=""
      />
      <div
        class="click-zone"
        data-target="gaine"
        style="top: 87%; left: 49%; width: 215px; height: 103px"
      ></div>

      <img
        id="soudeur"
        class="object-hover"
        src="img/soudure/Soudeur (C).png"
        alt=""
      />
      <div
        class="click-zone"
        data-target="soudeur"
        style="top: 59%; left: 59%; width: 550px; height: 100px"
      ></div>
    </div>

    <div id="progress">√âtape 0 / 9</div>
    <div id="feedback">‚ùå Mauvais objet, recommence la soudure !</div>

    <script>
      const sequence = [
        "pince",
        "gaine",
        "pince",
        "pince",
        "gaine",
        "etain",
        "gaine",
        "soudeur",
        "gaine",
        "soudeur",
      ];
      const photos = [
        "photo1",
        "photo2",
        "photo3",
        "photo4",
        "photo5",
        "photo6",
        "photo7",
        "photo8",
        "photo9",
      ];
      let step = 0;

      const progress = document.getElementById("progress");
      const feedback = document.getElementById("feedback");
      const zones = document.querySelectorAll(".click-zone");

      function updateProgress() {
        progress.textContent = `√âtape ${step} / ${sequence.length}`;

        // Afficher photo correspondante
        photos.forEach((id, index) => {
          const img = document.getElementById(id);
          img.classList.toggle("active", index === step);
        });
      }

      function showError() {
        feedback.style.opacity = 1;
        setTimeout(() => {
          feedback.style.opacity = 0;
        }, 1500);
      }

      function resetGame() {
        step = 0;
        updateProgress();
        showError();
        console.warn("‚ùå Mauvais ordre, recommence !");
      }

      updateProgress();

      zones.forEach((zone) => {
        const targetId = zone.dataset.target;

        zone.addEventListener("click", () => {
          const expected = sequence[step];

          if (targetId === expected) {
            step++;
            updateProgress();

            if (step === sequence.length) {
              progress.textContent = "üéâ Soudure termin√©e !";
              feedback.style.opacity = 0;
              console.log("üéâ Puzzle r√©ussi !");
            }
          } else {
            resetGame();
          }
        });
      });
    </script>
  </body>
</html>
