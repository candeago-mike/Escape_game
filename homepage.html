<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Escape Game</title>
    <link rel="stylesheet" href="css/homePage.css" />
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/MorphSVGPlugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/SplitText.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>
  </head>
  <body>
    <div class="start">
      <input type="text" id="nameInput" placeholder="Prénom" />
      <button id="playBtn">Jouer</button>
    </div>

    <div class="text-typing text-typing-start">
      <span class="text-content"></span>
      <svg width="20" height="20" viewBox="0 0 10 10" class="triangle-icon">
        <polygon points="0,0 10,0 5,10" fill="white" class="triangle" />
      </svg>
    </div>
    <script>
      gsap.set(".triangle", {
        opacity: 0,
      });
      document
        .getElementById("playBtn")
        .addEventListener("click", function (e) {
          e.preventDefault();
          gsap.to(".start", {
            opacity: 0,
            duration: 1,
          });
          gsap.to(".text-content", {
            duration: 2,
            delay: 1,
            text: "17:30 Mince ! Mon PC ! Je l’ai oublié à l’IUT. J’espère que Fatima est encore là, je vais aller voir...",
            ease: "none",
            onComplete: function () {
              // Une fois le texte fini, animer le triangle
              gsap.to(".triangle", {
                duration: 0.5,
                opacity: 1,
                y: 5,
                repeat: -1, // répète en boucle
                yoyo: true, // va-et-vient
                ease: "sine.inOut",
              });
            },
          });
          // Masquer au clic
          document
            .querySelector(".text-typing")
            .addEventListener("click", function () {
              gsap.to(".text-typing", {
                duration: 1,
                opacity: 0,
                ease: "none",
                onComplete: function () {
                  window.location.href = "index.html";
                },
              });
            });
          document.addEventListener("keydown", function (event) {
            if (event.key === "Enter") {
              gsap.to(".text-typing", {
                duration: 1,
                opacity: 0,
                ease: "none",
                onComplete: function () {
                  window.location.href = "index.html";
                },
              });
            }
          });
        });
    </script>
    <script src="script.js"></script>
  </body>
</html>
