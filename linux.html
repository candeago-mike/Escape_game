<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Explorateur PC simul√©</title>
    <script src="js/inventory.js" defer></script>
    <script src="js/script.js" defer></script>

    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="stylesheet" href="css/styles.css" />
    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #2e2e2e;
        color: #fff;
      }

      #desktop {
        width: 100vw;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      #explorer {
        width: 800px;
        height: 500px;
        background: #1e1e1e;
        border: 2px solid #555;
        display: flex;
        border-radius: 6px;
        overflow: hidden;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
      }

      #folders {
        width: 200px;
        background: #333;
        padding: 10px;
        overflow-y: auto;
      }

      #folders ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      #folders li {
        padding: 6px 10px;
        margin-bottom: 4px;
        background: #444;
        border-radius: 4px;
        cursor: pointer;
      }

      #folders li:hover {
        background: #555;
      }

      #content {
        flex: 1;
        padding: 10px;
        background: #222;
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        align-content: flex-start;
        overflow-y: auto;
      }

      .file {
        width: 80px;
        text-align: center;
        cursor: pointer;
      }

      .file img {
        width: 50px;
        height: 50px;
        display: block;
        margin: 0 auto 5px;
      }

      .file span {
        display: block;
        font-size: 12px;
        word-wrap: break-word;
      }
      .button {
        position: absolute;
        padding: 10px 20px;
        font-size: 22px;
        background-color: #000;
        color: #fff;
        text-decoration: none;
        cursor: pointer;
        border: 1px solid #fff;
        border-radius: 999px;
        z-index: 1;
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        transition: transform 0.2s ease-out, box-shadow 0.2s ease-out,
          background-color 0.2s ease-out;
      }
      .button:hover {
        transform: translateY(-5px);
        box-shadow: 0 0 20px rgba(255, 255, 255, 0.6),
          0 0 40px rgba(255, 255, 255, 0.4);
        background-color: #111;
      }
    </style>
  </head>
  <body>
    <a class="button" href="03fallum√©.html">Revenir dans la salle</a>
    <div id="desktop">
      <div id="explorer">
        <div id="folders">
          <ul id="folderList"></ul>
        </div>
        <div id="content"></div>
      </div>
    </div>

    <script>
      // ==============================
      // SYST√àME DE FICHIERS CHAOTIQUE
      // ==============================
      const fileSystem = {
        Documents: {
          type: "folder",
          content: {
            Administratif: {
              type: "folder",
              content: {
                "impots_2019.pdf": { type: "file" },
                "impots_2020.pdf": { type: "file" },
                "impots_2021_FINAL_v2.pdf": { type: "file" },
                Brouillons: {
                  type: "folder",
                  content: {
                    "brouillon1.docx": { type: "file" },
                    "brouillon2.docx": { type: "file" },
                    "ancien.txt": { type: "file" },
                  },
                },
              },
            },
            Cours: {
              type: "folder",
              content: {
                MMI: {
                  type: "folder",
                  content: {
                    "cours-web.pdf": { type: "file" },
                    "cours-video.pdf": { type: "file" },
                    "notes.txt": { type: "file" },
                    Archives: {
                      type: "folder",
                      content: {
                        "notes_v1.txt": { type: "file" },
                        "notes_v2.txt": { type: "file" },
                        Divers: {
                          type: "folder",
                          content: {
                            "random.txt": { type: "file" },
                            "test.txt": { type: "file" },
                          },
                        },
                      },
                    },
                  },
                },
              },
            },
          },
        },

        Backup: {
          type: "folder",
          content: {
            Backup_Ancien: {
              type: "folder",
              content: {
                "data_old.bin": { type: "file" },
                "save1.bak": { type: "file" },
                "save2.bak": { type: "file" },
              },
            },
          },
        },

        T√©l√©chargements: {
          type: "folder",
          content: {
            "setup.exe": { type: "file" },
            "image_random.png": { type: "file" },
            "document(1).pdf": { type: "file" },
            "document(2).pdf": { type: "file" },
          },
        },

        Syst√®me: {
          type: "folder",
          content: {
            Drivers: {
              type: "folder",
              content: {
                "audio.sys": { type: "file" },
                "video.sys": { type: "file" },
              },
            },
            Logs: {
              type: "folder",
              content: {
                "error.log": { type: "file" },
                "warning.log": { type: "file" },
                "debug.log": { type: "file" },
              },
            },
          },
        },

        TEMP: {
          type: "folder",
          content: {
            "temp1.tmp": { type: "file" },
            "temp2.tmp": { type: "file" },
            Random: {
              type: "folder",
              content: {
                "???": { type: "file" },
                "wtf.txt": { type: "file" },
                Cache: {
                  type: "folder",
                  content: {
                    "cache1.dat": { type: "file" },
                    "cache2.dat": { type: "file" },

                    // üéØ LE FICHIER IMPORTANT
                    "toto.txt": {
                      type: "special",
                    },
                  },
                },
              },
            },
          },
        },
      };

      const folderList = document.getElementById("folderList");
      const content = document.getElementById("content");
      let currentFolder = fileSystem;

      // ==============================
      // AFFICHAGE DES DOSSIERS RACINE
      // ==============================
      function renderFolders() {
        folderList.innerHTML = "";
        for (const folder in fileSystem) {
          const li = document.createElement("li");
          li.textContent = folder;
          li.addEventListener("dblclick", () => {
            currentFolder = fileSystem[folder].content;
            renderContent(currentFolder);
          });
          folderList.appendChild(li);
        }
      }

      // ==============================
      // AFFICHAGE DU CONTENU
      // ==============================
      function renderContent(folder) {
        content.innerHTML = "";

        for (const name in folder) {
          const item = folder[name];
          const div = document.createElement("div");
          div.className = "file";

          const img = document.createElement("img");
          img.src =
            item.type === "folder"
              ? "https://img.icons8.com/ios-filled/50/ffffff/folder-invoices.png"
              : "https://img.icons8.com/ios-filled/50/ffffff/document.png";

          const span = document.createElement("span");
          span.textContent = name;

          // üìÅ Dossier
          if (item.type === "folder") {
            div.addEventListener("dblclick", () => renderContent(item.content));
          }

          // üìÑ SEUL FICHIER INTERACTIF
          if (item.type === "special" && name === "toto.txt") {
            div.addEventListener("dblclick", () => {
              alert(
                `Etapes de la soudure:
Pince
Gaine
Pince
Pince
Gaine
√âtain
Gaine
Fer √† souder
Gaine
Fer √† souder`
              );
            });
          }

          // ‚ùå Tous les autres fichiers ‚Üí rien

          div.appendChild(img);
          div.appendChild(span);
          content.appendChild(div);
        }
      }

      // ==============================
      // INIT
      // ==============================
      renderFolders();
      renderContent(currentFolder);
    </script>
  </body>
</html>
